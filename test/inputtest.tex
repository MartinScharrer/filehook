%&pdflatex
\documentclass{filehooktest}

\AtBeginOfInputs{\testmessage{At Begin Of Inputs}}
\AtEndOfInputs{\testmessage{At End Of Inputs}}
\AtBeginOfInputFile{input}{\testmessage{At Begin Of Input File{}}}
\AtEndOfInputFile{input}{\testmessage{At End Of Input File{}}}

\begin{document}

\begin{test}{\jobname}
\testmessage{Main file before input file}
\input{input}
\testmessage{Main file after input file}

\reference{%
Main file before input file
At Begin Of Input File{}
At Begin Of Inputs
Content of Input File
At End Of Inputs
At End Of Input File{}
Main file after input file
}%
\end{test}

\end{document}

