%&pdflatex
\documentclass{memoir}
\RequirePackage{filehooktest}

\AtBeginOfIncludes{\testmessage{At Begin Of Includes}}
\AtEndOfIncludes{\testmessage{At End Of Includes}}
\AfterIncludes{\testmessage{After Includes}}
\AtBeginOfIncludeFile{include}{\testmessage{At Begin Of Include File `include'}}
\AtEndOfIncludeFile{include}{\testmessage{At End Of Include File `include'}}
\AfterIncludeFile{include}{\testmessage{After Include File `include'}}

\AtBeginOfFiles{\testmessage{At Begin Of Files}}
\AtEndOfFiles{\testmessage{At End Of Files}}
\AtBeginOfFile{include}{\testmessage{At Begin Of File `include'}}
\AtEndOfFile{include}{\testmessage{At End Of File `include'}}

\AtBeginOfEveryFile{\testmessage{At Begin Of Every File}}
\AtEndOfEveryFile{\testmessage{At End Of Every File}}


\begin{document}

\begin{test}{\jobname}
\testmessage{Main file before include file}
\include{include}
\testmessage{Main file after include file}

\reference{%
Main file before include file
At Begin Of Every File
At Begin Of Include File `include'
At Begin Of Includes
At Begin Of File `include'
At Begin Of Files
Content of Include File
At End Of Files
At End Of File `include'
At End Of Includes
At End Of Include File `include'
After Includes
After Include File `include'
At End Of Every File
Main file after include file
}%

\end{test}

\end{document}


